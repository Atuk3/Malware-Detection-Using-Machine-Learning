# Static Malware Analysis for Portable Executable Files using Machine Learning (NOT COMPLETED)
This is my final year project and all the source code is in this repository


This project provides a Python-based tool for performing static malware analysis on portable executable (PE) files using machine learning techniques. The tool can extract features from PE files, such as header information, imported and exported functions, and opcode sequences, and train machine learning models to classify the files as malicious or benign. The tool can also perform various analyses on the features to gain insight into the behavior of the malware.
## Machine Learning models,
1. RandomForestClassifier : first model is trained on the portable executable files' different sections characteristic which allows us to classify whether a given input file is malicious file or not.
2. CNN model : This model is trained on 9639 malware images of 25 different malware families and using this model we try to classify the detected malware from the first model into 25 different malware families.
So starting with the first model, since we are working with the portable executable files we need to understand the structure of the PE files and which characteristics matter the most. Here is the link to understand the structure, if you want you can check it out [here](https://tech-zealots.com/malware-analysis/pe-portable-executable-structure-malware-analysis-part-2/)
## ðŸ“š The datasets used:
The dataset used to train the first model is available [here](https://www.kaggle.com/amauricio/pe-files-malwares)

The second dataset i.e Malware image dataset is the already generated dataset from microsoft's 2015 kaggle competition dataset, you can download it from [here](https://www.dropbox.com/s/ep8qjakfwh1rzk4/malimg_dataset.zip?dl=0)

To get Malware samples to test the Model, you can download them from [here](https://github.com/Da2dalus/The-MALWARE-Repo)

So these are the datasets used for building two different models but in the end working as a pipeline. Now these datasets are somewhat old as they were published in 2017 and at the time of making this project they were relevant so you might want to change the data source or you can build a dataset yourself using some of the utility functions from the scripts of this project. Since there wasn't enough time to test this entire project on 1000s of PE files we didnt add the retraining of the data part but you can find that code in the scripts part and execute it when there will be enough new data available.

## Features
Extracts header information, imported and exported functions, and opcode sequences from PE files
Uses feature selection techniques to reduce the feature dimensionality
Trains machine learning models (such as decision trees, random forests, and SVMs) to classify the files as malicious or benign
Provides various metrics for evaluating the performance of the models, such as accuracy, precision, recall, and F1 score
Performs additional analyses on the features, such as clustering and visualization, to gain insight into the behavior of the malware
## Installation
Clone the repository: git clone https://github.com/Atuke/Malware-Detection-Using-Machine-Learning.git
Install the required packages: pip install -r requirements.txt
## Usage
Open the main.py file and specify the paths to the directories containing the malicious and benign PE files.
Set the desired configuration parameters, such as the feature selection method, machine learning algorithm, and evaluation metrics.
Run the script: python main.py
## Results
The tool generates various output files, such as the trained machine learning models, the selected features, and the evaluation metrics. The tool also generates various plots and visualizations to help interpret the results. The results can be used to gain insight into the behavior of the malware and improve the detection and prevention of malware attacks.

## Acknowledgments
This project was inspired by the work of various researchers and practitioners in the field of static malware analysis and machine learning, such as [references to related work].
